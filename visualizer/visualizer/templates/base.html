<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Pipetree Visualizer{% endblock %}</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='8 8 184 184'%3E%3Cdefs%3E%3ClinearGradient id='brand' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0%25' stop-color='%2338bdf8'/%3E%3Cstop offset='100%25' stop-color='%2322c55e'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='100' cy='100' r='92' fill='%23020617'/%3E%3Ccircle cx='100' cy='100' r='72' fill='none' stroke='url(%23brand)' stroke-width='16'/%3E%3Ccircle cx='100' cy='78' r='26' fill='url(%23brand)'/%3E%3Ccircle cx='78' cy='90' r='22' fill='url(%23brand)'/%3E%3Ccircle cx='122' cy='90' r='22' fill='url(%23brand)'/%3E%3Crect x='92' y='102' width='16' height='44' rx='6' fill='url(%23brand)'/%3E%3C/svg%3E">

    <!-- Tailwind CSS (built locally) -->
    <link rel="stylesheet" href="/static/vendor/css/tailwind.min.css">

    <!-- Flowbite -->
    <link rel="stylesheet" href="/static/vendor/css/flowbite.min.css">

    <!-- HTMX -->
    <script src="/static/vendor/js/htmx.min.js"></script>
    <script src="/static/vendor/js/htmx-ws.js"></script>
    <script src="/static/vendor/js/idiomorph-ext.min.js"></script>

    <!-- Custom styles -->
    <link rel="stylesheet" href="/static/css/pipetree.css">

    {% block head %}{% endblock %}
</head>
<body class="h-full bg-slate-900">
    <div class="flex h-full">
        <!-- Dark Sidebar -->
        <aside class="w-16 bg-slate-900 border-r border-slate-700 flex flex-col items-center py-4 flex-shrink-0">
            <!-- Logo -->
            <a href="/" class="mb-8" title="Pipetree">
                <svg class="w-10 h-10" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" role="img" aria-label="Pipetree logo">
                    <defs>
                        <linearGradient id="brand" x1="0" y1="0" x2="1" y2="1">
                            <stop offset="0%" stop-color="#38bdf8"/>
                            <stop offset="100%" stop-color="#22c55e"/>
                        </linearGradient>
                    </defs>
                    <circle cx="100" cy="100" r="92" fill="#020617"/>
                    <circle cx="100" cy="100" r="72" fill="none" stroke="url(#brand)" stroke-width="16"/>
                    <circle cx="100" cy="78" r="26" fill="url(#brand)"/>
                    <circle cx="78" cy="90" r="22" fill="url(#brand)"/>
                    <circle cx="122" cy="90" r="22" fill="url(#brand)"/>
                    <rect x="92" y="102" width="16" height="44" rx="6" fill="url(#brand)"/>
                </svg>
            </a>

            <!-- Nav Icons -->
            <nav class="flex flex-col items-center gap-2">
                <!-- Home -->
                <a href="/" class="nav-icon {% block nav_home %}{% endblock %}" title="Dashboard">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                </a>

                <!-- Pipeline (run detail) -->
                <span class="nav-icon {% block nav_pipeline %}{% endblock %}" title="Pipeline">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                    </svg>
                </span>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 bg-gray-100 overflow-auto rounded-tl-2xl">
            {% block content %}{% endblock %}
        </main>
    </div>

    <!-- Flowbite JS -->
    <script src="/static/vendor/js/flowbite.min.js"></script>

    {% block scripts %}{% endblock %}
</body>
</html>
