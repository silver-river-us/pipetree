#!/usr/bin/env bash
set -euo pipefail

cd "$(dirname "$0")/.."

echo "=== Lint ==="
pipenv run ruff check .
pipenv run ruff format --check .

echo ""
echo "=== Type Check ==="
pipenv run mypy pipetree/

echo ""
echo "=== Tests with Coverage ==="
pipenv run pytest tests/ -v --cov=pipetree --cov-report=term-missing --cov-fail-under=100

echo ""
echo "=== All checks passed ==="
